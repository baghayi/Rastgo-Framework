<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>مستندات فریمورک راستگو</title>
  <meta name="description" content="The documentation of the Rastgo Framework" />
  <meta name="author" content="Rastgo Framework" />

  <meta name="viewport" content="width=device-width; initial-scale=1.0" />
  <link href="includes/stylesheet.css" rel="stylesheet" type="text/css" />
  <script src="includes/javascript.js" type="text/javascript"></script>
</head>

<body>
  <div>
    <header>
      <h1 id="title" title='ErrorReporting'>ErrorReporting</h1>
    </header>
    
    <nav>
      <h3><a href="index.html">صفحه اصلی</a></h3>
      <h3><a href="library.html">کتابخانه فریمورک</a></h3>
      <h3><a href="core.html">هسته فریمورک</a></h3>
      <h3><a href="others.html">بخش های دیگر</a></h3>
    </nav>

    <section id='content'>
    	<article>
			<header>
				<h3>فهرست</h3>
			</header>
			
			<ul>
				<li><a href="#mainclass" alt="index.php (کلاس اصلی)">index.php (کلاس اصلی)</a></li>
			</ul>
    	</article>
    	
    	<article>
			<header>
				<h3>توضیحات</h3>
			</header>
			
			<a name="mainclass" id="mainclass"></a>
			<h4>index.php (کلاس اصلی)</h4>
			<p>وظیفه این کلاس کنترل خطا ها و لوگ کردنشونه (ذخیرشون در فایل مشخص)</p>
			<p>این کلاس فاینال هست.</p>
			
			<h5>پروپرتی ها</h5>
			<p>این کلاس ۵ تا پروپرتی داره</p>
			<br />
			
			<p>پروپرتی $errorTypes که شامل آرایه ای از فایل های مجازی که می خواهیم داشته باشیم / در حقیقت نام پوشه ها مون هست که خطا ها توشون قراره ذخیره بشه و لیست سفید ای که وقتی خطایی گزارش می دیم در یکی از متدهامون و پرامتر هاش باید یکی از این گزینه ها رو تعیین کنیم که تو یکی از این فایل ها ذخیره بشه</p>
			<p>که یه متدی هم هست که می شه موارد جدیدی رو به این آرایه افزود که در موردش بحث می شه</p>
			<p>مقادیر فعلی و پیشفرض آرایه، database و authentication و others هست.</p>
			<p>این پروپرتی هم private هست</p>
			<hr />
			
			<p>پروپرتی بعدی $logFileExtention و همینطور private هستش</p>
			<p>که پسوند فایل های لوگ مون رو توش ذخیره می شه و بظور پیش فرض مقدار زیر رو داره</p>
			<pre class="ltr">.txt</pre>
			<hr />
			
			<p>پروپرتی بعدی $logDirPath هست و وظیفش نگهداری آدرس کامل پوشه لوگ هست</p>
			<hr />
			
			<p>پروپرتی بعدی مون $reportedError و private هست که خطای گزارش شده را به شکل خالصی (افزودن مقادیری به متن خام گزارش شده) توسط متدی تو خودش ذخیره می کنه</p>
			<hr />
			
			<p>پروپرتی بعدی مون $logFileSize و باز هم private هستش و حداکثر مقدار هر فایل ای رو تو خودش ذخیره می کنه و برحسب کیلوبایت باید باشه</p>
			<p>مقدار پیش فرض 10000000 هستش برابر 10 مگ</p>
			<p>که اگه حجم هر فایلی به این مقدار برسه فایل حدیدی ایجاد می شه و به ابتدای فایل اصلی تاریخ همون روز افزوده می شه</p>
			<hr />
			
			<h5>متدها</h5>
			<br />
			
			<p>متد اولی همون متد سازنده هست و آدس کامل پوشه لوگ رو تهیه و در پروپرتی مناسف ذخیره می کنه</p>
			<hr />
			
			<p>اصلی ترین متدمون که قراره باهاش کار کنیم و اکثرا هم با این متد کار خواهیم کرد برای گزارش خطا ها reportError نام داره و پابلیک هم هستش </p>
			<p>این متد ۵ تا پارامتر قبول میکنه</p>
			<p>اولین پارامتر مون ($message) متن خطا ای رو که شما تعیین می کنید می گیره</p>
			<p>دومین پارامتر ($line) شماره خط رو بهش می دید (مقدار ثابت __line__)</p>
			<p>سومین پارامتر هم ($methodName) نام متد ای خطا توش رخ داده (با مقدار قابت __METHOD__)</p>
			<p>چهارمین پارامتر ($throwException) اختیاری و مقدار پیش فرض false هست / که اگه true بهش بدید باعث می شه متن خطایی که در پارامتر اولی بهش دادید رو به عنوان استثنا ارسال کنه</p>
			<p>پنجمین پارامتر ($errorType) نام فایل هست (می شه به نوعی هم گفت نوع خطا) که مقدار وارد شده در این پارامتر باید یکی از مقادیر پروپرتی $errorTypes باشه که قبلا در موردش بحث کردیم که در فایلی به همون اسم خطا رو ذخیره کنه</p>
			<hr />
			
			<p>متد بعدی throwException و private هست که تنها یک پارامتر ($message) می گیره و متن رو استثنا ارسال می کنه</p>
			<hr />
			
			<p>متد بعدی مون WriteInLogFile و private هست که تنها پارامترش نام فایل یا همون $errorType در متد قبلی رو می گیره و خطا رو که در پروپرتی $reportedError ذخیره شده رو می گیره و تو فایل می ریزه</p>
			<hr />
			
			<p>متد بعدی مون createLogFiles و private هستش و هیچ پارامتر ای نمی گیره و فقط نام فایل ها رو ار پروپرتی $errorType می گیره و همینطور پسوند فایل رو از پروپرتی $logFileExtention و در نهایت فایل ای به همون اسم ها ایجاد می کنه</p>
			<hr />
			
			<p>متد بعدی setLogFileExtension و پابلیک هستش و باهاش می تونید پسوند فایل رو تعیین کنید و تنها پارامترش هم رشه می گیره و نام پسوند ( بعلاوه دات Dot / نقطه)</p>
			<hr />
			
			<p>متد بعدی addErrorType و پابلیک هم هستش و یه پارامتر می گیره و باید رشته باشه و به نوع فایل ها در پروپرتی مخصوص خودش اصافه می کنه</p>
			<hr />
			
			<p>متدی بعدی showErrorTypes و پابلیک هستش و نوع فایل ها و در حقیقت مقدار پروپرتی $errorTypes که ارایه هم هست رو برمی گردونه</p>
			<hr />
			
			<p>متد بعدی spliteLogFile و private هست که نام فایل رو می گیره و مقدار پروپرتی $logFileSize رو با حجم فایل چک می کنه و اگه فایل log مون از حجم تعیین شده بزرگتر باشه فایل رو تغییر اسم می ده و یه فایل دیگه ایجاد می کنه که حجم فایل ها خیلی زیاد نشه</p>
			<hr />
			
			<p>متد بعدی که پابلیک هم هستش setFileSize نام داره و برای تعیین کردن حداکثر حجم هر فایل استفاده می شه و حجم فایل باید بر حسب کیلوبایت باشه و مقدار هم باید عدد باشه</p>
			<hr />
			
			<p>متد بعدی createLogDir نام داره و پیرایوت هستش و وظیقه اش ایجاد پوشه لوگ تو پوشه __rfolder رو به عهده داره</p>
			<hr />
			
			<h5>نکات</h5>
			<p>نکته پایانی اینکه، برای دسترسی به شی ایجاد شده از این کلاس که در کلاس رجیستری ذخیره شده می تونید از کد زیر در کنترلر یا کلاس هاتون و ...  استفاده کرده و بهش دسترسی داشته باشید:</p>
			<pre class="ltr">
global $registry;
$registry->error->THE_METHOD_NAME();
			</pre>
    	</article>
    </section>

    <footer>
     <p>&copy; Copyright  by Rastgo Framework 2011</p>
    </footer>
  </div>
</body>
</html>