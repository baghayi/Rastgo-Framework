<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>مستندات فریمورک راستگو</title>
  <meta name="description" content="The documentation of the Rastgo Framework" />
  <meta name="author" content="Rastgo Framework" />

  <meta name="viewport" content="width=device-width; initial-scale=1.0" />
  <link href="includes/stylesheet.css" rel="stylesheet" type="text/css" />
  <script src="includes/javascript.js" type="text/javascript"></script>
</head>

<body>
  <div>
    <header>
      <h1 id="title" title='Crontab'>Crontab</h1>
    </header>
    
    <nav>
      <h3><a href="index.html">صفحه اصلی</a></h3>
      <h3><a href="library.html">کتابخانه فریمورک</a></h3>
      <h3><a href="core.html">هسته فریمورک</a></h3>
      <h3><a href="others.html">بخش های دیگر</a></h3>
    </nav>

    <section id='content'>
    	<article>
			<header>
				<h3>فهرست</h3>
			</header>
			<ul>
				<li><a href="#mainclass" alt="index.php (کلاس اصلی)">index.php (کلاس اصلی)</a></li>
				<li><a href="#crontabcommand" alt="CrontabCommand.php (کلاس برای ایجاد دستورات کرون)">CrontabCommand.php (کلاس برای ایجاد دستورات کرون)</a></li>
				<li><a href="#readme" alt="readme.txt (توضیحات اضافی در مورد کلاس)">readme.txt (توضیحات اضافی در مورد کلاس)</a></li>
				<li><a href="#sample" alt="sample/crontabController.php (نمونه مثال)">sample/crontabController.php (نمونه مثال)</a></li>
			</ul>
    	</article>
    	
    	<article>
    		<header>
    			<h3>توضیحات</h3>
    		</header>
    		
    		<a name="mainclass" id="mainclass"></a>
    		<h4>index.php (کلاس اصلی)</h4>
    		<p>کلاس Crontab همونطوری که از اسمش پیداس برای کار با crontab ایجاد شده و البته نیازه که دسترسی کار با دستور تابع shell_exec تو سرورتون باز باشه که همونطوری که می دونید بحاطر مسائل امنیتی این تابع در سرورهای اشتراکی بستس.</p>
    		<p>این کلاس توسط شخص دیگه ای نوشته شده بود و فقط کدهاشو بهینه کردم و توضیحات به توابع اضافه کردم و همینطور یه کلاسی هم پیشش افزودم به اسم CrontabCommand برای ایجاد دستورات crontab که بشه راحت و با کمترین زحمت دستوراتش رو تهیه کرد.</p>
    		<p>اول در مورد کلاس  Crontab که به اسم index.php تو پوشه  Crontab در لایبرری هست توضیح می دم:</p>
    		<br />
    		
    		<h5>پروپرتی ها</h5>
    		<p>پروپرتی $CrontabCommandObject که شی کلاس CrontabCommand رو تو خودش ذخیره می کنه و بصورت private تعریف شده.</p>
    		<br />
    		
    		<h5>متد ها</h5>
    		<p>- makeCommand() متد پابلیک هست که در صورتی که صدا زده بشه شئ ای از کلاس  CrontabCommand رو برگشت می ده و ازش برای صدا زدن متدهای کلاًس  CrontabCommand می شه استفاده کرد.</p>
    		<p>و همینطور توجه داشته باشید که در صورتی که یکبار این متد رو صدا بزنید و برای بار دوم یا … بخواهید دوباره صدا بزنید همان شئ اولی رو بر می گردونه.</p>
    		<hr />
    		
    		<p>-  getJobs() متد پابلیک هست و در صورتی که صدا زده بشه لیست دستوراتی موجود در cron رو بصورت ارایه برمی گردونه. یعنی تمام cron job ها رو بصورت آرایه برگشت می ده.</p>
    		<hr />
    		
    		<p>- saveJobs() متد پابلیک هست و دارای یک پارامتر هست و باید بصورت آرایه باشه و با استفاده از این متد می شه لیستی از cron job ها یا دستورات رو به سیستم وارد کرد و هر دستور بصورت یک المنت باید در آرایه قرار بگیره.</p>
    		<p>توجه کنید که در صورتی که از این متد استفاده کنید دستورات فعلی موجود در سیستم (cron) رو حذف می کنه و با دستورات ای که بهش می‌دید جایگزین خواهد کرد که برای جلوگیری از این عمل می تونید ابتدا لیست دستورات فعلی رو بگیرید و سپس همراه دستورات خودتون وارد سیستم کنید. که برای گرفتن لیست دستورات فعلی می تونید از متد getJobs() استفاده کنید.</p>
    		<hr />
    		
    		<p>- doesJobExist() متد پابلیک و برای چک کردن اینکه آیا دستوری (که توسط ما تعیین می شه) جزو دستورات موجود در cron هست یا خیر. و توسط تنها پارامتر این متد دستور رو وارد می‌کنید و دستور باید بصورت string باشه و در صورتی که وجود داشته باشه مقدار 1 برگشت داده می‌شه و در غیراینصورت مقدار 0 برمی گردونه.</p>
    		<hr />
    		
    		<p>- addJob() متد پابلیک هست و برای افزودن دستور cron به سیستم (کنار باقی دستورات cron) استفاده می شه. دارای یک پارامتر هست و دستور باید بصورت رشته به متد داده بشه.</p>
    		<p>نکته: درصورتی که دستور وارد شده قبلاً وارد شده باشه مقدر 0 برگشت داده می شه در غیراینصورت دستور کنار دستورات فعلی قرار می گیره! و همینطور در صورتی که عملیات با موفقیت انجام بشه مقداری برگشت داده نمی شه!</p>
    		<hr />
    		
    		<p>- removeJob() متد پابلیک هست و دارای یک پارامتر هست که برای حذف دستور موجود در cron استفاده می شه و مقدار باید بصورت string باشه.</p>
    		<p>در صورتی که دستور قبلاً در سیستم نباشه مقدار 0 برگشت داده می شه و در صورت موفقیت مقداری بازگشت داده نمی شه!</p>
    		<hr />
    		
    		<p>- stringToArray() متد private هست و برای تبدیل رشته به آرایه استفاده می شه که در حقیقت از این متد در دیگر متد ها برای تبدیل استفاده می شه که دستورات کاربر رو به سیستم بده و یا بالعکس!</p>
    		<hr />
    		
    		<p>- arrayToString() متد private هست و برای تبدیل آرایه به رشته استفاده می شه که در حقیقت از این متد در دیگر متد ها برای تبدیل استفاده می شه که دستورات کاربر رو به سیستم بده و یا بالعکس!</p>
    		<hr />
    		
    		<p>- متد مخرب یا همان __destruct() که برای از بین بردن شئ کلاس  CrontabCommand هست که در صورتی که از متد makeCommand() استفاده شده باشه در نهایت کلاس شئ ایجاد شده رو با استفاده از این متد از بین می بره!</p>
    		<hr />
    		
    		<h5>نکات</h5>
    		<p>نکته: در برخی متدها با وجود اینکه دستور با موفقیت انجام می شه ولی تاییدیه ای از متد دریافت نمی‌کنید که برای اینکه مطمئن بشید مقدار به سیستم تحویل داده شده و عملیات با موفقیت انجام شده می تونید از متد doesJobExist() استفاده کنید!</p>
    		<p>نکته: در هر متد در صورتی که عملیات با موفقیت انجام نشه با خطا (استثنا) روبرو خواهید شد. در حقیقت در صورتی که مثلاً کرون در سرور نصب نباشه و یا اجازه استفاده از کرون نداشته باشید خطا (استثنا) ارسال خواهد شد.</p>
    		<br />
    		
    		<a name="crontabcommand" id="crontabcommand"></a>
    		<h4>CrontabCommand.php (کلاس برای ایجاد دستورات کرون)</h4>
    		<p>این کلاس دارای 7 پراپرتی که همگی خصوصی هستند.</p>
    		<br />
    		
    		<h5>پروپرتی ها</h5>
    		    		
    		<p>- $minute  برای ذخیره دقیقه که مقدار پیش‌فرض * هستش.</p>
    		<hr />
    		
    		<p>- $hour برای ذخیره ساعت که مقدار پیش‌فرض * هستش.</p>
    		<hr />
    		
    		<p>- $dayOfMonth برای ذخیره روز که مقدار پیش‌فرض * هستش.</p>
    		<hr />
    		
    		<p>- $month برای ذخیره ماه که مقدار پیش‌فرض * هستش.</p>
    		<hr />
    		
    		<p>- $dayOfWeek برای ذخیره روزه هفته (از دوشنبه تا یکشنبه) که مقدار پیش‌فرض * هستش.</p>
    		<hr />
    		
    		<p>- $command برای ذخیره دستور کرون که NULL هست.</p>
    		<hr />
    		
    		<p>- $registry برای ذخیره شئ کلاس Registry و NULL هست.</p>
    		<hr />
    		
    		<h5>متدهای کلاس</h5>
    		<p>- __construct() متد سازنده که شئ کلاس رجیستری رو در پروپرتی $registry ذخیره می کنه و کار خاص دیگه ای انجام نمی ده.</p>
    		<hr />
    		
    		<p>- setMinute() متد پابلیک و دارای یک پارامتر هست و برای تعیین دقیقه بکار می ره.</p>
    		<p>مقدار ورودی باید عدد باشه و از 0 تا 59 می شه تعیین کرد.</p>
    		<p>مقدار رو هم بصورت آرایه می شه وارد متد کرد، مثلاً اگر می‌خواهید در دقایق مشخصی و بیش از یک بار دستور اجرا بشه برای این کار مقدار رو بصورت آرایه به متد می‌دید و هر عدد در هر المنت قرار می گیره / مثلا:</p>
    		<pre class="ltr">array(0, 5, 50);</pre>
    		<p>مقدار برگشتی تابع، همان مقدار وارد شده ولی بصورت String خواهد بود.</p>
    		<hr />
    		
    		<p>- setHour() متد پابلیک و دارای یک پارامتر هست و برای تعیین ساعت بکار می ره.</p>
    		<p>مقدار ورودی باید عدد باشه و از 0 تا 23 می شه تعیین کرد.</p>
    		<p>مقدار رو هم بصورت آرایه می شه وارد متد کرد، مثلاً اگر می‌خواهید در ساعات مشخصی و بیش از یک بار دستور اجرا بشه برای این کار مقدار رو بصورت آرایه به متد می‌دید و هر عدد در هر المنت قرار می گیره / مثلا:</p>
    		<pre class="ltr">array(0, 20);</pre>
    		<p>مقدار برگشتی تابع، همان مقدار وارد شده ولی بصورت String خواهد بود.</p>
    		<hr />
    		
    		<p>- setDayOfMonth() متد پابلیک و دارای یک پارامتر هست و برای تعیین روز (چندم از ماه) بکار می ره.</p>
    		<p>مقدار ورودی باید عدد باشه و از ۱ تا 31 می شه تعیین کرد.</p>
    		<p>مقدار رو هم بصورت آرایه می شه وارد متد کرد، مثلاً اگر می‌خواهید در روزهای مشخصی (از ماه) و بیش از یک بار دستور اجرا بشه برای این کار مقدار رو بصورت آرایه به متد می‌دید و هر عدد در هر المنت قرار می گیره / مثلا:</p>
    		<pre class="ltr">array(1, 5, 31);</pre>
    		<p>مقدار برگشتی تابع، همان مقدار وارد شده ولی بصورت String خواهد بود.</p>
    		<hr />
    		
    		<p>- setMonth() متد پابلیک و دارای یک پارامتر هست و برای تعیین ماه بکار می ره.</p>
    		<p>مقدار ورودی باید عدد باشه و از ۱ تا 12 می شه تعیین کرد.</p>
    		<p>مقدار رو هم بصورت آرایه می شه وارد متد کرد، مثلاً اگر می‌خواهید در ماه های مشخصی (از سال) و بیش از یک بار دستور اجرا بشه برای این کار مقدار رو بصورت آرایه به متد می‌دید و هر عدد در هر المنت قرار می گیره / مثلا:</p>
    		<pre class="ltr">array(1, 5, 12);</pre>
    		<p>مقدار برگشتی تابع، همان مقدار وارد شده ولی بصورت String خواهد بود.</p>
    		<hr />
    		
    		<p>- setDayOfWeek() متد پابلیک و دارای یک پارامتر هست و برای تعیین روز هفته (از یکشنبه که عدد 0 هست تا شنبه که 6 هست) بکار می ره.</p>
    		<p>مقدار ورودی باید عدد باشه و از 0 تا 6 می شه تعیین کرد.</p>
    		<p>مقدار رو هم بصورت آرایه می شه وارد متد کرد، مثلاً اگر می‌خواهید در روزهای مشخصی از هفته و بیش از یک بار دستور اجرا بشه برای این کار مقدار رو بصورت آرایه به متد می‌دید و هر عدد در هر المنت قرار می گیره / مثلا:</p>
    		<pre class="ltr">array(0, 5);</pre>
    		<p>مقدار برگشتی تابع، همان مقدار وارد شده ولی بصورت String خواهد بود.</p>
    		<hr />
    		
    		<p>- setCommand() تابع پابلیک هست و دارای یک پارامتر هست و برای تعیین دستور کرون (cron job) استفاده می شه.</p>
    		<p>مقدار ورودی بصورت رشته باید باشه.</p>
    		<p>استفاده از این متد در این کلاس برای تعیین دستور کرون ضروری هست و در غیراینصورت در صورتی که  خروجی رو توسط متد getResult() بگیرید با خطا (استثنا) رو برو می شید!</p>
    		<p>مقدار برگشتی تابع، همان مقدار وارد شده خواهد بود.</p>
    		<hr />
    		
    		<p>- getResult() متد پابلیک هست و در نهایت برای گرفتن خروجی استفاده می شه که همه مقادیر رو بصورت منظم در کنار هم قرار می ده و کدنهایی رو بصورت String تحویل می ده.</p>
    		<p>توجه کنید که اگر دستور کرون رو توسط متد setCommand() تعیین نکنید و با این وجود بخواهید از این متد برای گرفتن خروجی استفاده کنید با خطا (استثنا) رو برو خواهید شد.</p>
    		<hr />
    		
    		<p>- reset() متد پابلیک هست و در صورتی که از این متد استفاده بشه تمام پروپرتی ها به مقدار پیشفرضشون تغییر خواهند کرد.</p>
    		<p>یعنی در صورتی که از متدهای قبلی استفاده کرده باشد و مقدار هایی رو تعیین کرده باشید همگی حذف شده و با مقدار های پیش‌فرض جایگزین می شن که در اینصورت باید دوباره از متدها برای مقداردهی استفاده کنید.</p>
    		<br />
    		
    		<a name="readme" id="readme"></a>
    		<h4>readme.txt (توضیحات اضافی در مورد کلاس)</h4>
    		<p>توضیحاتی درمورد کلاس در فایل readme.txt قرار داره که خوندنش خالی از لطف نخواهد بود.</p>
    		<br />
    		
    		<a name="sample" id="sample"></a>
    		<h4>sample/crontabController.php (نمونه مثال)</h4>
    		<p>مثالی هایی از عمل‌کرد کلاس Crontab در کنترلر crontabControlller در پوشه sample کنار کلاس‌ها قرار گرفته که با استفاده از اون فایل می تونید از نحوه عملکرد کلاس تا حدودی آشنا بشید.</p>
    		<br />
    	</article>
    </section>

    <footer>
     <p>&copy; Copyright  by Rastgo Framework 2011</p>
    </footer>
  </div>
</body>
</html>